<div class="container">
  <h2>Voir les Données</h2>

  <form [formGroup]="filtreForm" (ngSubmit)="onFilter()" class="filter-form">

    <input type="number" placeholder="Lat Min" formControlName="latMin" />
    <input type="number" placeholder="Lat Max" formControlName="latMax" />
    <input type="number" placeholder="Lon Min" formControlName="lonMin" />
    <input type="number" placeholder="Lon Max" formControlName="lonMax" />
    <input type="number" placeholder="Prof Min" formControlName="profMin" />
    <input type="number" placeholder="Prof Max" formControlName="profMax" />
    <input type="date" formControlName="dateDebut" />
    <input type="date" formControlName="dateFin" />
    <button type="submit">Rechercher</button>
  </form>

  <div id="map" style="height: 400px; margin: 20px 0;"></div>

  <table *ngIf="profils.length > 0" class="data-table table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>Date</th>
        <th>Heure</th>
        <th>Latitude</th>
        <th>Longitude</th>
        <th>Profondeur</th>
        <th>Parametres CTD</th>
        <th>Parametres Bouteilles</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of getProfilsPage()">
        <td>{{ p.idProfil }}</td>
        <td>{{ p.dateProfil }}</td>
        <td>{{ p.tempsProfil }}</td>
        <td>{{ p.lat }}</td>
        <td>{{ p.longitude }}</td>
        <td>{{ p.depth }}</td>
        <td>{{ p.parametresCTD?.join(', ') }}</td>
        <td>{{ p.parametresBouteille?.join(', ') }}</td>
      </tr>
    </tbody>
  </table>
  
  <div class="d-flex justify-content-between mb-3">
    <button class="btn btn-secondary" (click)="previousPage()" [disabled]="page === 0">
      ⬅️ Précédent
    </button>
    <button class="btn btn-secondary" (click)="nextPage()" [disabled]="(page + 1) * pageSize >= profils.length">
      Suivant ➡️
    </button>
  </div>
  
  <div class="container mt-4" *ngIf="parametres && parametres.length > 0">
    <h4 class="mb-3">Légende des paramètres :</h4>
    <div class="row" *ngFor="let pair of parametres | slice:0:100; let i = index">
      <ng-container *ngIf="i % 2 === 0">
        <div class="col-md-6 mb-2">
          <strong>{{ parametres[i].codeParam }}:</strong>
          {{ parametres[i].libelleParam }} ({{ parametres[i].unite }})
        </div>
        <div class="col-md-6 mb-2" *ngIf="parametres[i + 1]">
          <strong>{{ parametres[i + 1].codeParam }}:</strong>
          {{ parametres[i + 1].libelleParam }} ({{ parametres[i + 1].unite }})
        </div>
      </ng-container>
    </div>
  </div>
  
  <button class="btn btn-primary">Test Bootstrap</button>

  <button routerLink="/extraction" class="btn-extract">
    Extraction
  </button>
  
</div>
